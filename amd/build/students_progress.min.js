/**
 * Languages configuration for the block_course_activity_time plugin.
 *
 * @package   block_course_activity_time
 * @copyright 2024, Lucas Mendes {@link https://www.lucasmendesdev.com.br}
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */ define(["jquery","core/templates","core/str","block_course_activity_time/repository","block_course_activity_time/modal",],function(t,e,n,a){let i={NOT_FOUND:"block_course_activity_time/components/students_progress/row_not_found_students",EMPTY:"block_course_activity_time/components/students_progress/row_empty_students",STUDENTS:"block_course_activity_time/components/students_progress/row_students"};async function s(t,n=!1){try{let s=r(t),d=await a.getStudents(s),c=i.STUDENTS;n||d.users.length||s.search||(c=i.EMPTY),n||d.users.length||!s.search||(o(t,"see_more"),c=i.NOT_FOUND),n||t.find(".course-activity-time-table-body").empty();let u=await e.render(c,{users:d.users,courseid:s.courseid});t.find(".total_students").text(d.total),t.find(".course-activity-time-table-body").append(u);let l=t.find(".students-item").length;d.total===l?o(t):t.find(".see_more").hasClass("hidden")&&d.total>l&&function t(e,n="see_more"){e.find(`.${n}`).removeClass("hidden"),e.find(`.${n}`).attr("disabled",!1)}(t)}catch(f){let m=await e.render(i.EMPTY);o(t),t.find(".course-activity-time-table-body").append(m),console.log(f)}}function o(t,e="see_more"){t.find(`.${e}`).addClass("hidden"),t.find(`.${e}`).attr("disabled",!0)}function r(t){return{courseid:Number(t.attr("data-courseid")),limit:Number(t.attr("data-limit")),page:Number(t.attr("data-page")),search:t.find("#search").val()||"",from:t.find("#from").val()||"",to:t.find("#to").val()||""}}async function d(e){await s(e=t(e)),function t(e){e.find(".see_more").on("click",async function(){let t=Number(e.attr("data-page"))+1;e.attr("data-page",t),await s(e,r(e),!0)})}(e);let n;e.find("#search").on("keyup",t=>{clearTimeout(n),n=setTimeout(()=>{s(e)},2e3)}),e.find('[name="from"]').on("change",t=>{s(e)}),e.find('[name="to"]').on("change",t=>{s(e)})}return{init:d}});
/**
 * Languages configuration for the block_course_activity_time plugin.
 *
 * @package   block_course_activity_time
 * @copyright 2024, Lucas Mendes {@link https://www.lucasmendesdev.com.br}
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */ define(["jquery","core/templates","core/str","block_course_activity_time/repository",],function(t,e,i,n){async function a(e,i){let a=e.val(),r=t(e).parent(),[c,l,d]=a.split(":");n.changeTime({hours:Number(3600*+c+60*+l+ +d),activityId:Number(r.attr("data-activity")),courseId:Number(i.attr("data-courseid"))}).then(()=>{t(e).remove();let n=document.createElement("span");n.classList.add("add-time"),n.innerText=`${a}`,r.append(n),o(i),s(i)}).catch(async t=>{console.log(t)})}async function r(e,i){let n=e.find(".time").text(),a=document.createElement("input");a.classList.add("insert-time"),a.setAttribute("type","text"),a.setAttribute("placeholder","H:M:S");let r=t(e).parent();r.append(a),VMasker(a).unMask(),VMasker(a).maskPattern("99:99:99"),t(a).val(n),e.remove(),c(i)}function c(e){e.find(".insert-time").off(),e.find(".insert-time").focusout(async i=>{await a(t(i.target),e)}),e.find(".insert-time").off(),e.find(".insert-time").on("keypress",async i=>{13===i.which&&await a(t(i.target),e)})}function s(e){e.find(".add-time").off(),e.find(".add-time").dblclick(async i=>{await r(t(i.target),e)})}function o(t){let e=Array.from(document.querySelectorAll(".time"));if(console.log(e),!e.length)return;let i=e.reduce((t,e)=>t+Number(e.innerText),0);t.find(".total-time").text(i)}return{init:function e(i){c(i=t(i)),s(i),o(i),VMasker(document.querySelectorAll(".insert-time")).maskPattern("99:99:99")}}});
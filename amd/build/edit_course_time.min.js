/**
 * Languages configuration for the block_course_activity_time plugin.
 *
 * @package   block_course_activity_time
 * @copyright 2024, Lucas Mendes {@link https://www.lucasmendesdev.com.br}
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */ define(["jquery","core/templates","core/str","block_course_activity_time/repository"],function(t,e,i,n){async function a(e,i){let a=e.val(),r=t(e).parent();n.changeTime({hours:Number(a),activityId:Number(r.attr("data-activity")),courseId:Number(i.attr("data-courseid"))}).then(()=>{t(e).remove();let n=document.createElement("span");n.classList.add("add-time");let c="hora";a>1&&(c="horas"),n.innerText=`${a} ${c}`,r.append(n),s(i),o(i)}).catch(async t=>{console.log(t)})}async function r(e,i){let n=e.find(".time").text(),a=document.createElement("input");a.classList.add("insert-time"),a.setAttribute("type","number");let r=t(e).parent();r.append(a),t(a).val(n),e.remove(),c(i)}function c(e){e.find(".insert-time").off(),e.find(".insert-time").focusout(async i=>{await a(t(i.target),e)}),e.find(".insert-time").off(),e.find(".insert-time").on("keypress",async i=>{13===i.which&&await a(t(i.target),e)})}function o(e){e.find(".add-time").off(),e.find(".add-time").dblclick(async i=>{await r(t(i.target),e)})}function s(t){let e=Array.from(document.querySelectorAll(".time"));if(console.log(e),!e.length)return;let i=e.reduce((t,e)=>t+Number(e.innerText),0);t.find(".total-time").text(i)}return{init:function e(i){c(i=t(i)),o(i),s(i)}}});